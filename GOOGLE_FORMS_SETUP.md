# Google Formsを使った新着情報管理システム セットアップガイド

## 概要

山口県よさこい連絡協議会の新着情報を、Google Formsを使って簡単に管理できるシステムです。

管理者は技術的な知識なしに、Googleフォームから記事を投稿できます。

## システム構成

1. **Google Forms**: 管理者が記事を投稿
2. **Google Sheets**: フォームの回答を自動保存
3. **Netlify Functions**: Google Sheetsからデータを取得
4. **Webサイト**: 取得したデータを表示

## セットアップ手順

### Phase 1: Google Forms & Sheets の作成

#### 1. Google Formsの作成

1. [Google Forms](https://forms.google.com/) にアクセス
2. 「新しいフォーム」を作成
3. フォームタイトル: 「山口県よさこい連絡協議会 新着情報投稿フォーム」

#### 2. フォーム項目の設定

以下の項目を追加してください：

**項目1: タイトル**
- タイプ: 記述式
- 必須項目: はい

**項目2: 本文**
- タイプ: 段落
- 必須項目: はい

**項目3: カテゴリ**
- タイプ: 選択式（ラジオボタン）
- 選択肢: お知らせ、イベント、募集、その他
- 必須項目: はい

**項目4: 重要度**
- タイプ: 選択式（ラジオボタン）
- 選択肢: 高、中、低
- 必須項目: はい

#### 3. Google Sheetsとの連携

1. フォーム編集画面で「回答」タブをクリック
2. 「スプレッドシートの作成」をクリック
3. 新しいスプレッドシートを作成

### Phase 2: Google Sheets API の設定

#### 1. Google Cloud Consoleでの設定

1. [Google Cloud Console](https://console.cloud.google.com/) にアクセス
2. プロジェクトを作成または選択
3. 「APIとサービス」→「ライブラリ」から「Google Sheets API」を有効化

#### 2. サービスアカウントの作成

1. 「APIとサービス」→「認証情報」
2. 「認証情報を作成」→「サービスアカウント」
3. サービスアカウント名: 「yamayosa-sheets-api」
4. 「キーを作成」→「JSON」形式でダウンロード

#### 3. スプレッドシートの共有

1. 作成したスプレッドシートを開く
2. 「共有」ボタンをクリック
3. サービスアカウントのメールアドレス（JSONファイル内の`client_email`）を追加
4. 権限: 「編集者」に設定

### Phase 3: Netlify環境変数の設定

Netlifyダッシュボードで以下の環境変数を設定：

```
GOOGLE_PROJECT_ID=（プロジェクトID）
GOOGLE_PRIVATE_KEY_ID=（プライベートキーID）
GOOGLE_PRIVATE_KEY=（プライベートキー）
GOOGLE_CLIENT_EMAIL=（クライアントメール）
GOOGLE_CLIENT_ID=（クライアントID）
GOOGLE_SPREADSHEET_ID=（スプレッドシートID）
```

**スプレッドシートIDの取得方法:**
スプレッドシートのURLから取得
```
https://docs.google.com/spreadsheets/d/[この部分がスプレッドシートID]/edit
```

## 管理者への引き継ぎ方法

### 1. 共同編集者として追加

1. Google Formsの編集画面で右上の「︙」をクリック
2. 「共同編集者を追加」を選択
3. 管理者のGmailアドレスを入力
4. 権限: 「編集者」を選択

### 2. 所有者移譲（必要に応じて）

1. 「設定」→「所有者を移譲」
2. 管理者のGmailアドレスを入力
3. 移譲を実行

## 使用方法

### 管理者側の操作

1. 共有されたGoogle Formsにアクセス
2. 必要な情報を入力
3. 「送信」ボタンをクリック
4. 約5-10分後にサイトに反映

### 投稿フォームの項目

- **タイトル**: 記事のタイトル
- **本文**: 記事の内容（改行可能）
- **カテゴリ**: お知らせ、イベント、募集、その他
- **重要度**: 高、中、低

## トラブルシューティング

### 投稿が反映されない場合

1. フォームが正しく送信されているか確認
2. Google Sheetsにデータが追加されているか確認
3. Netlifyのデプロイログを確認
4. 環境変数が正しく設定されているか確認

### サポート

技術的な問題が発生した場合は、開発者にお問い合わせください。

## 料金

- Google Forms: 無料
- Google Sheets: 無料
- Google Sheets API: 無料（制限内）
- Netlify Functions: 無料枠内で利用可能

## セキュリティ

- Google Formsは指定されたユーザーのみアクセス可能
- API認証は安全に管理
- 不正アクセス対策済み 